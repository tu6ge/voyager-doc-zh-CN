(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{144:function(t,s,a){t.exports=a.p+"assets/img/bread_relationship.1472aa57.png"},145:function(t,s,a){t.exports=a.p+"assets/img/bread_relationship_no_bread.5894fde5.png"},146:function(t,s,a){t.exports=a.p+"assets/img/bread_relationship_form.926f98c5.png"},185:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"关联表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关联表"}},[t._v("#")]),t._v(" 关联表")]),t._v(" "),n("h2",{attrs:{id:"添加关联"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#添加关联"}},[t._v("#")]),t._v(" 添加关联")]),t._v(" "),n("p",[t._v("使用BREAD你可以非常方便的在多个表之间创建关联关系， 在页面底部你可以看到一个按钮“创建关联”")]),t._v(" "),n("p",[n("img",{attrs:{src:a(144),alt:""}})]),t._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[t._v("通知")]),t._v(" "),n("p",[t._v("如果你即将关联的表格，没有创建BREAD，那么你需要先去创建对应的BREAD，然后再回来添加关联，否则你将收到如下通知")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(145),alt:""}})]),t._v(" "),n("p",[t._v("因此，只有你先创建好BREAD，才允许你创建一个新的关联，在按下“创建关联”按钮后，你会看到一个下面这样的新窗口：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(146),alt:""}})]),t._v(" "),n("p",[t._v("你首先应该选择哪种关联关系，然后选择要关联的表已经这个表的模型的命名空间，然后选择要关系的字段")]),t._v(" "),n("p",[t._v("你也可以在下拉列表中要关联的字段")]),t._v(" "),n("p",[t._v("现在你可以使用Voyager非常方便地创建"),n("code",[t._v("belongsTo")]),t._v(", "),n("code",[t._v("belongsToMany")]),t._v(", "),n("code",[t._v("hasOne")]),t._v("和 "),n("code",[t._v("hasMany")]),t._v("关联")]),t._v(" "),n("h2",{attrs:{id:"高级设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#高级设置"}},[t._v("#")]),t._v(" 高级设置")]),t._v(" "),n("p",[t._v("如果需要为 "),n("code",[t._v("belongsToMany")]),t._v(" 关系设置高级选项，可以在保存关系后，在“详细信息”字段中设置以下参数：")]),t._v(" "),n("div",{staticClass:"language-php extra-class"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"foreign_pivot_key"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"user_id"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"related_pivot_key"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"role_id"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"parent_key"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"id"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"关联排序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关联排序"}},[t._v("#")]),t._v(" 关联排序")]),t._v(" "),n("p",[t._v("通过在关系选项中设置排序对象，可以对关系的结果进行排序：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sort"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"field"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my_field"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"direction"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"asc"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("或者")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sort"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"field"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my_field"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"direction"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"desc"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"关系作用域"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关系作用域"}},[t._v("#")]),t._v(" 关系作用域")]),t._v(" "),n("p",[t._v("通过在外部模型中定义本地作用域，可以轻松筛选显示的关系选项。")]),t._v(" "),n("p",[t._v("例如，如果只想显示活动项，请创建如下作用域：")]),t._v(" "),n("div",{staticClass:"language-php extra-class"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scopeActive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$query")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$query")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("where")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'active'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("然后在关联字段的配置中，作如下设置")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scope"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"active"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("这个值是不带单词 scope 的  scope方法的名称。")])])}),[],!1,null,null,null);s.default=e.exports}}]);